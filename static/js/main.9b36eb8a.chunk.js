(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(39)},30:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),c=a.n(r),s=a(18),l=a(19),i=a(23),u=a(20),m=a(24),b=(a(30),a(3)),h=a.n(b),f=a(8),d=a(7),k=a(9),p=a(14),v="https://reactnd-books-api.udacity.com",E=localStorage.token;E||(E=localStorage.token=Math.random().toString(36).substr(-8));var N={Accept:"application/json",Authorization:E},g=function(e,t){return fetch("".concat(v,"/books/").concat(e.id),{method:"PUT",headers:Object(p.a)({},N,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})})},y=function(e){var t=e.onMove,a=e.shelf,r=e.searchBookShelf,c=e.book,s=Object(n.useState)(r),l=Object(d.a)(s,2),i=l[0],u=l[1];return Object(n.useEffect)(function(){u(r)},[r]),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{value:a||i,onChange:function(e){u(e.target.value),t(c,e.target.value)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))},j=function(e){var t=e.books,a=e.onMove,r=e.title,c=e.authors,s=e.shelf,l=e.thumbnail,i=e.book,u=e.bookid,m=Object(n.useState)("none"),b=Object(d.a)(m,2),k=b[0],p=b[1],E=function(){var e=Object(f.a)(h.a.mark(function e(t){var a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new AbortController,e.next=3,(n=t,fetch("".concat(v,"/books/").concat(n),{headers:N})).then(function(e){return e.json()}).then(function(e){return p(e.book.shelf)}).catch(function(e){"AbortError"===e.name&&console.log("Fetch Aborted")});case 3:return e.abrupt("return",function(){return a.abort()});case 4:case"end":return e.stop()}var n},e)}));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){var e=!0;return e&&E(u),function(){return e=!1}},[]),o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},"no image"!==l?o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'+l+'")'}}):o.a.createElement("div",{className:"book-cover-placeholder",style:{width:128,height:193}},o.a.createElement("p",null,"no image available")),o.a.createElement(y,{books:t,onMove:a,id:u,shelf:s,searchBookShelf:k,book:i})),o.a.createElement("div",{className:"book-title"},r),o.a.createElement("div",{className:"book-authors"},void 0!==c?c.map(function(e){var t=e.split(" ").join("-");return o.a.createElement("p",{key:t},e)}):c))},w=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(d.a)(c,2),l=s[0],i=s[1],u=function(){var e=Object(f.a)(h.a.mark(function e(t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i(t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)(function(){var e=!1,t=setTimeout(Object(f.a)(h.a.mark(function t(){var a,n;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""===l){t.next=10;break}return t.next=3,o=l,fetch("".concat(v,"/search"),{method:"POST",headers:Object(p.a)({},N,{"Content-Type":"application/json"}),body:JSON.stringify({query:o})});case 3:return a=t.sent,t.next=6,a.json();case 6:n=t.sent,e||r(n.books),t.next=11;break;case 10:r("");case 11:case"end":return t.stop()}var o},t)})),500);return function(){e=!0,clearTimeout(t)}},[l]);var m=function(e,t){var a=!1;function n(){return(n=Object(f.a)(h.a.mark(function a(){return h.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g(e,t);case 2:case"end":return a.stop()}},a)}))).apply(this,arguments)}return a||function(){n.apply(this,arguments)}(),function(){return a=!0}};return""===a||void 0===a?o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(k.b,{to:"/",exact:"true"},o.a.createElement("button",{className:"close-search"},"Close")),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:function(e){u(e.target.value)}}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("p",null,"No Keywords Entered"))):a.items&&0===a.items.length?o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(k.b,{to:"/",exact:"true"},o.a.createElement("button",{className:"close-search"},"Close")),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:function(e){u(e.target.value)}}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("p",null,"No results found with those keywords"))):o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(k.b,{to:"/",exact:"true"},o.a.createElement("button",{className:"close-search"},"Close")),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:function(e){u(e.target.value)}}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},a.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(j,{books:a,onMove:m,title:e.title,authors:e.authors,shelf:e.shelf,thumbnail:e.imageLinks?e.imageLinks.smallThumbnail:"no image",book:e,bookid:e.id}))}))))},O=function(e){var t=e.books,a=e.onMove;return o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement("div",{className:"bookshelf currentlyReading"},o.a.createElement("h2",{className:"bookshelf-title"},"Currently Reading"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},t.filter(function(e){return"currentlyReading"===e.shelf}).map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(j,{books:t,onMove:a,title:e.title,authors:e.authors,shelf:e.shelf,thumbnail:e.imageLinks?e.imageLinks.smallThumbnail:"no image",book:e,bookid:e.id}))})))),o.a.createElement("div",{className:"bookshelf wantToRead"},o.a.createElement("h2",{className:"bookshelf-title"},"Want to Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},t.filter(function(e){return"wantToRead"===e.shelf}).map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(j,{books:t,onMove:a,title:e.title,authors:e.authors,shelf:e.shelf,thumbnail:e.imageLinks?e.imageLinks.smallThumbnail:"no image",book:e,bookid:e.id}))})))),o.a.createElement("div",{className:"bookshelf read"},o.a.createElement("h2",{className:"bookshelf-title"},"Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},t.filter(function(e){return"read"===e.shelf}).map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(j,{books:t,onMove:a,title:e.title,authors:e.authors,shelf:e.shelf,thumbnail:e.imageLinks?e.imageLinks.smallThumbnail:"no image",book:e,bookid:e.id}))}))))))},x=function(e){var t=e.books,a=e.onMove;return""!==t?o.a.createElement("div",{className:"list-books"},o.a.createElement("section",{className:"header-container"},o.a.createElement("div",{className:"list-books-title-container"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")))),o.a.createElement(O,{books:t,onMove:a}),o.a.createElement("div",{className:"open-search"},o.a.createElement(k.b,{to:"/search"},o.a.createElement("button",null,"Add a book")))):o.a.createElement("div",{className:"list-books"},o.a.createElement("p",null,"No books to show"),o.a.createElement("div",{className:"open-search"},o.a.createElement(k.b,{to:"/search"},o.a.createElement("button",null,"Add a book"))))},S=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],r=t[1],c=Object(n.useRef)(""),s=function(){var e=Object(f.a)(h.a.mark(function e(){var t,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/books"),{headers:N});case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,c.current=n,a===c.current){e.next=11;break}r(n),e.next=12;break;case 11:return e.abrupt("return");case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(e){s()},[]),a?o.a.createElement(x,{books:a.books,onMove:function(e,t){var a=!1;function n(){return(n=Object(f.a)(h.a.mark(function n(){return h.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a){n.next=4;break}return n.next=3,g(e,t);case 3:s();case 4:case"end":return n.stop()}},n)}))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){a=!0}}}):null},M=a(1),R=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={showSearchPage:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(k.a,null,o.a.createElement(M.a,{render:function(e){var t=e.location;return o.a.createElement(M.c,{location:t},o.a.createElement(M.a,{path:"/",exact:!0,component:S}),o.a.createElement(M.a,{path:"/search",component:w}))}}))}}]),t}(o.a.Component);a(38);c.a.render(o.a.createElement(R,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.9b36eb8a.chunk.js.map